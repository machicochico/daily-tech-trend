:root{
  --bg:#fff;
  --panel:#f9fafb;
  --text-main:#1f2937;
  --text-sub:#6b7280;
  --border:#e5e7eb;
  --accent:#2563eb;
  --accent-soft:#dbeafe;
  --new:#dc2626;
  --new-soft:#fee2e2;
  --important:#f59e0b;
  --important-soft:#fef3c7;
  --mobile-summary-height:0px;
  --mobile-category-height:0px;
}
body{background:var(--bg);color:var(--text-main)}
h1{margin:0 0 10px;font-size:26px}
h2{margin:22px 0 10px;font-size:18px}
.meta{color:var(--text-sub);font-size:12px;margin:6px 0 14px}
.nav{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 18px}
.nav a{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:6px 10px;text-decoration:none;color:#111}
.nav a.active{color:var(--accent);border-color:var(--accent);font-weight:700}
.meta,.small{color:var(--text-sub)}
.card{background:var(--panel);border:1px solid var(--border)}
.badge{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;color:#444;margin-left:6px}
.badge.recent{background:var(--new-soft);color:var(--new);border-color:var(--new);font-weight:700}
.badge.hot{font-weight:800}
.badge.new{border-style:dashed}
.badge.imp{background:var(--important-soft);color:var(--important);border-color:var(--important)}
.btn{padding:8px 12px;border:1px solid var(--border);border-radius:10px;background:var(--bg);cursor:pointer;display:inline-block;text-decoration:none}
.btn:hover{background:var(--panel)}
ul{margin:0;padding-left:18px}
li{margin:10px 0}
a{color:inherit;text-decoration:none}
a:hover{color:var(--accent)}

.summary-card,.topbox,.top-col,.insight{background:#fafafa;border:1px solid var(--border);border-radius:12px;padding:12px 14px}
.top-col{background:var(--bg)}
.tag{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;color:#444;margin-left:6px}
.summary-card{margin:10px 0 14px;position:static}
.summary-title{font-weight:800;font-size:16px;margin:0 0 6px}
.summary-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:8px}
.summary-item .k{color:#666;font-size:11px}
.summary-item .v{font-size:13px;font-weight:650}
.top-zone{display:grid;grid-template-columns:1fr;gap:12px;margin:10px 0 18px}
.top-col h3{margin:0 0 8px;font-size:14px}
.top-list{margin:0;padding-left:18px}
.mini{color:#666;font-size:12px;margin-top:2px}
.source-table{width:100%;border-collapse:collapse;font-size:13px}
.source-table th,.source-table td{padding:6px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
.source-table th.num,.source-table td.num{text-align:right;white-space:nowrap}
.warn-text{color:#b91c1c;font-weight:700}
.quick-controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-top:10px}
#q{padding:6px 10px;border:1px solid var(--border);border-radius:10px;min-width:0;width:100%}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.imp-2{border-color:#6c6}.imp-1{border-color:#9ad}.imp-0{border-color:#ccc}
.category-section{margin-top:18px}
.category-header{display:flex;align-items:center;gap:8px;position:sticky;top:0;z-index:10;background:var(--bg)}
.category-body{margin-top:8px}
.category-section.collapsed .category-body{display:none}
.top-item,.topic-row{margin:10px 0}
.topic-link,a{display:inline;overflow-wrap:anywhere;word-break:break-word}
.quick-controls label{font-size:12px}
.category-header .btn{margin-left:auto}
.top-col{padding:10px}
.topic-row{scroll-margin-top:88px}
#filter-count{color:#555}
#filter-hint{color:#666}
#filter-hint strong{color:#444}
.nas .small{display:block;margin-top:2px}
.close-floating{position:fixed;right:16px;bottom:16px;z-index:9999;padding:10px 14px;border-radius:999px}
.tag-bar{display:flex;flex-wrap:wrap;gap:6px;align-items:center}
.btn-reset{background:#f5f5f5;border:1px solid #ccc;font-weight:700}
.btn-more{background:var(--bg);border:1px dashed var(--border);font-weight:650}
.date{margin-left:6px;font-size:.85em;color:#666;white-space:nowrap}
#tag-active{display:flex;flex-wrap:wrap;gap:6px}
#tag-active .state-chip{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border:1px solid var(--border);border-radius:999px;background:var(--bg);font-size:11px;line-height:1.3}
#tag-active .state-chip b{font-weight:700;color:#374151}

/* details.insight rules in one place */
details.insight{margin-top:6px;border:1px solid var(--border);border-radius:10px;padding:6px 8px;background:var(--bg)}
details.insight>summary{cursor:pointer;list-style:none;padding:4px 0;font-weight:500}
details.insight>summary::-webkit-details-marker{display:none}
details.insight>summary::before{content:"▶ ";color:#4c6ef5}
details.insight[open]>summary::before{content:"▼ "}
details.insight[open]{background:#f7faff;border-color:#dbe7ff;box-shadow:0 4px 14px rgba(0,0,0,.08)}
details.insight[open]>*:not(summary){margin-top:6px}

@media (max-width:640px){
  .summary-card{position:static;padding:10px 12px;border-radius:12px;margin:10px 0 12px}
  .category-header{top:0;z-index:12;padding-top:0}
  .topic-row{scroll-margin-top:calc(var(--mobile-category-height) + 18px)}
  #tagBar.collapsed button:nth-of-type(n+11){display:none}
  .tag-mode{margin-left:4px}
  details.insight[open]{box-shadow:0 3px 10px rgba(0,0,0,.07)}
}
@media (min-width:820px){
  body{margin:24px;font-size:16px}
  .summary-grid{grid-template-columns:repeat(4,minmax(0,1fr))}
  .top-zone{grid-template-columns:1fr 1fr}
  #q{width:auto;min-width:260px}
  .quick-controls{gap:10px}
  .summary-card{position:sticky;top:8px;z-index:10}
}
