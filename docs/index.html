
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æŠ€è¡“å‹•å‘ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆ</title>
  <style>
    
:root{
  /* Base */
  --bg: #fff;
  --panel: #f9fafb;
  --text-main: #1f2937;
  --text-sub: #6b7280;
  --border: #e5e7eb;

  /* Accent */
  --accent: #2563eb;
  --accent-soft: #dbeafe;

  /* Status */
  --new: #dc2626;
  --new-soft: #fee2e2;

  --important: #f59e0b;
  --important-soft: #fef3c7;
}
body{
  background:var(--bg);
  color:var(--text-main);
}
h1{margin:0 0 10px}
h2{margin:22px 0 10px}
.meta{color:var(--text-sub);font-size:12px;margin:6px 0 14px}
.nav{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 18px}
.nav a{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:6px 10px;text-decoration:none;color:#111}
.nav a.active{border-color:#333;font-weight:700}
.meta,.small{
  color:var(--text-sub);
}

.card{
  background:var(--panel);
  border:1px solid var(--border);
}

.badge{
  border:1px solid var(--border);
  color:var(--text-main);
}
.badge.recent{
  background:var(--new-soft);
  color:var(--new);
  border-color:var(--new);
  font-weight:700;
}
.btn{padding:6px 10px;border:1px solid var(--border);border-radius:10px;background:var(--bg);cursor:pointer;display:inline-block;text-decoration:none}
.btn:hover{background:var(--panel)}
ul{margin:0;padding-left:18px}
li{margin:10px 0}
a{color:inherit}
a{
  color:inherit;
  text-decoration:none;
}

a:hover{
  color:var(--accent);
}

.nav a.active{
  color:var(--accent);
  border-color:var(--accent);
  font-weight:700;
}


    
/* techã®ç®±ãƒ»æ§‹é€ ã‚’å®šç¾©ã—ã¦ã„ã‚‹éƒ¨åˆ†ã‚’ã“ã“ã¸é›†ç´„ */
.summary-card, .topbox, .top-col, .insight{
  background:#fafafa;
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px 14px;
}
.top-col{ background:var(--bg); }

/* techã®è¦‹å‡ºã—é–“éš”ãƒ»å°æ–‡å­— */
.small{color:#666;font-size:12px}
.badge{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;color:#444;margin-left:6px}

/* ã‚‚ã—techã«ã‚¿ã‚°ã®è¦‹ãŸç›®ãŒã‚ã‚‹ãªã‚‰å¯„ã›ã‚‹ */
.tag{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;color:#444;margin-left:6px}


     /* --- UXæ”¹å–„â‘ : ä¸Šéƒ¨ã‚µãƒãƒªãƒ¼ + æ¨ªæ–­TOP --- */
    .summary-card{background:#fafafa;border:1px solid var(--border);border-radius:12px;padding:12px 14px;margin:10px 0 14px}
    .summary-title{font-weight:800;font-size:16px;margin:0 0 6px}
    .summary-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;margin-top:8px}
    .summary-item .k{color:#666;font-size:11px}
    .summary-item .v{font-size:13px;font-weight:650}

    .top-zone{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:10px 0 18px}
    .top-col{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:10px 12px}
    .top-col h3{margin:0 0 8px;font-size:14px}
    .top-list{margin:0;padding-left:18px}
    .mini{color:#666;font-size:12px;margin-top:2px}
    .source-table{width:100%;border-collapse:collapse;font-size:13px}
    .source-table th,.source-table td{padding:6px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
    .source-table th.num,.source-table td.num{text-align:right;white-space:nowrap}
    .warn-text{color:#b91c1c;font-weight:700}

    .quick-controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:10px}
    #q{padding:6px 10px;border:1px solid var(--border);border-radius:10px;min-width:260px}
    .btn{padding:6px 10px;border:1px solid var(--border);border-radius:10px;background:var(--bg);cursor:pointer}

    .badge.hot{font-weight:800}
    .badge.new{border-style:dashed}

   .badge.imp{
      background:var(--important-soft);
      color:var(--important);
      border-color:var(--important);
    }
    .imp-2{border-color:#6c6}
    .imp-1{border-color:#9ad}
    .imp-0{border-color:#ccc}

    .category-section{margin-top:18px}
    .category-header{display:flex;align-items:center;gap:10px}
    .category-body{margin-top:8px}
    .category-section.collapsed .category-body{display:none}
    
    /* ===== Mobile-first overrides ===== */
    h1{font-size:26px}
    h2{font-size:18px}

    .summary-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
    .top-zone{grid-template-columns:1fr}
    .top-list{padding-left:18px}
    .top-item, .topic-row{margin:10px 0}

    /* é•·ã„ã‚¿ã‚¤ãƒˆãƒ«å¯¾ç­–ï¼ˆã¯ã¿å‡ºã—é˜²æ­¢ï¼‰ */
    .topic-link, a{
      display:inline;
      overflow-wrap:anywhere;
      word-break:break-word;
    }

    /* æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã¯ç¸¦ç©ã¿æ°—å‘³ã« */
    .quick-controls{gap:8px}
    #q{min-width:0; width:100%}
    .quick-controls label{font-size:12px}
    .btn{padding:8px 12px} /* ã‚¿ãƒƒãƒ—é ˜åŸŸå¢— */

    /* ã‚«ãƒ†ã‚´ãƒªè¦‹å‡ºã—å‘¨ã‚Š */
    .category-header{gap:8px}
    .category-header .btn{margin-left:auto}

    /* ã‚¹ãƒãƒ›ã§ã€Œä»Šæ—¥ã®è¦ç‚¹ã€ã‚¾ãƒ¼ãƒ³ã‚’è¦‹ã‚„ã™ã */
    .summary-card{padding:12px}
    .top-col{padding:10px}

    /* ç”»é¢å¹…ãŒåºƒã„æ™‚ã ã‘PCãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¸ */
    @media (min-width: 820px){
      body{margin:24px; font-size:16px}
      .summary-grid{grid-template-columns:repeat(4,minmax(0,1fr))}
      .top-zone{grid-template-columns:1fr 1fr}
      #q{width:auto; min-width:260px}
    }

    /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆã‚¹ãƒãƒ›ï¼‰ï¼šå›ºå®šã—ãªã„ */
    .summary-card{
      position: static;
    }

    /* PCã‚µã‚¤ã‚ºä»¥ä¸Šã®ã¿å›ºå®š */
    @media (min-width: 820px){
      .summary-card{
        position: sticky;
        top: 8px;
        z-index: 10;
      }
    }
    details.insight { margin-top:6px; }
    details.insight > summary {
      cursor:pointer;
      list-style:none;
    }
    details.insight > summary::-webkit-details-marker {
      display:none;
    }
    details.insight > summary::before {
      content:"â–¶ ";
    }
    details.insight[open] > summary::before {
      content:"â–¼ ";
    }
    /* details å±•é–‹æ™‚ã®è¦–èªæ€§å‘ä¸Š */
    details.insight {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 6px 8px;
      background: var(--bg);
    }

    details.insight[open] {
      background: #f7faff;           /* è–„ã„é’ */
      border-color: #dbe7ff;
    }

    /* summaryï¼ˆãƒˆã‚°ãƒ«ï¼‰ã®è¦‹ãŸç›® */
    details.insight > summary {
      cursor: pointer;
      padding: 4px 0;
      font-weight: 500;
    }

    details.insight > summary::-webkit-details-marker {
      display: none;
    }

    /* é–‹é–‰ã‚¢ã‚¤ã‚³ãƒ³ */
    details.insight > summary::before {
      content: "â–¶ ";
      color: #4c6ef5;
    }
    details.insight[open] > summary::before {
      content: "â–¼ ";
    }

    /* å±•é–‹å¾Œã®ä¸­èº«ã®ä½™ç™½ */
    details.insight[open] > *:not(summary) {
      margin-top: 6px;
    }
    /* é–‹ã„ã¦ã„ã‚‹è¦ç´„ã ã‘å½±ã‚’ä»˜ã‘ã‚‹ */
    details.insight[open] {
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
    }

    /* ã‚¹ãƒãƒ›ã§æµ®ãã™ããªã„ã‚ˆã†ã«å¾®èª¿æ•´ */
    @media (max-width: 640px) {
      details.insight[open] {
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.07);
      }
    }
    /* ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã« sticky ã«éš ã‚Œãªã„ */
    .topic-row { scroll-margin-top: 88px; }
    
    #filter-count { color:#555; }
    
    #filter-hint { color:#666; }
    #filter-hint strong { color:#444; }

    .nas .small{display:block;margin-top:2px}

    .close-floating{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 9999;
      padding: 10px 14px;
      border-radius: 999px;
    }
    .category-header{
      position: sticky;
      top: 0;
      z-index: 10;
      background: var(--bg); /* èƒŒæ™¯å¿…é ˆ */
    }

    /* Tag bar: wrap + mobile collapse */
    .tag-bar{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
    }

    .btn-reset{
      background:#f5f5f5;
      border:1px solid #ccc;
      font-weight:700;
    }

    .btn-more{
      background:var(--bg);
      border:1px dashed var(--border);
      font-weight:650;
    }

    /* ã‚¹ãƒãƒ›æ™‚ï¼šåˆæœŸã¯7å€‹ã¾ã§è¡¨ç¤ºï¼ˆReset + OR + ã‚¿ã‚°ç¾¤å«ã‚ã¦èª¿æ•´å¯ï¼‰ */
    @media (max-width: 640px){
      #tagBar.collapsed button:nth-of-type(n+8){
        display:none;
      }
      /* ORãƒã‚§ãƒƒã‚¯ã®ãƒ©ãƒ™ãƒ«ã¯å¸¸ã«è¦‹ã›ãŸã„ãªã‚‰ã€ä¸Šã®nth-of-typeå¯¾è±¡å¤–ã«ã™ã‚‹ãŸã‚åˆ¥classã§æ‰±ã† */
      .tag-mode{ margin-left:4px; }
    }
    .date{
      margin-left: 6px;
      font-size: 0.85em;
      color: #666;
      white-space: nowrap;
    }

  </style>
</head>
<body>
  <h1>æŠ€è¡“å‹•å‘ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆ</h1>
  <div class="nav">
    <a href="/daily-tech-trend/" class="active">æŠ€è¡“</a>
    <a href="/daily-tech-trend/news/" class="">ãƒ‹ãƒ¥ãƒ¼ã‚¹</a>
  </div>

    <div class="summary-card">
    <div class="summary-title">ä»Šæ—¥ã®è¦ç‚¹ï¼ˆæŠ€è¡“å‹•å‘ï¼‰</div>
    <button id="closeFloating" class="close-floating" hidden>é–‰ã˜ã‚‹</button>
    <div class="summary-grid">
      <div class="summary-item">
        <div class="k">Generated (JST)</div>
        <div class="v">2026-02-13 23:09:33 JST</div>
      </div>
      <div class="summary-item">
        <div class="k">Runtime</div>
        <div class="v">0 sec</div>
      </div>
      <div class="summary-item">
        <div class="k">Articles</div>
        <div class="v">0 <span class="small">(new48h 0)</span></div>
      </div>
      <div class="summary-item">
        <div class="k">RSS Sources</div>
        <div class="v">72</div>
      </div>
    </div>
    <div class="small" style="margin-top:10px">
      <span class="badge">Tags</span>

      <div id="tagBar" class="tag-bar collapsed" style="margin-top:6px">
        <button class="btn btn-reset" type="button" onclick="clearTagFilter()">ğŸ”„ Reset</button>

        <label class="small tag-mode">
          <input type="checkbox" id="tagModeOr"> ORï¼ˆã©ã‚Œã‹ï¼‰
        </label>

        
      </div>

      <button id="tagMore" class="btn btn-more" type="button" style="margin-top:6px">ï¼‹ more</button>

    </div>
    <div id="tag-active" class="small" style="margin-top:6px; display:none;"></div>
    <div class="quick-controls">
      <input id="q" type="search" placeholder="Search title/summary..." />
      <button class="btn" type="button" onclick="toggleAllCats()">Toggle categories</button>
      <label class="small">sort
        <select id="sortKey">
          <option value="date">æ—¥ä»˜</option>
          <option value="importance">é‡è¦åº¦</option>
        </select>
      </label>

      <label class="small">order
        <select id="sortDir">
          <option value="desc">é™é †</option>
          <option value="asc">æ˜‡é †</option>
        </select>
      </label>

      <button class="btn" type="button" onclick="applySort()">Apply</button>

    </div>
    <div id="filter-count" class="small" style="margin-top:6px; display:none;"></div>
    <div id="filter-hint" class="small" style="margin-top:4px; display:none;"></div>
  </div>

  <section class="top-zone">
    <div class="top-col">
      <h3>ğŸŒGlobal Top 10ï¼ˆimportance Ã— recentï¼‰</h3>
      <ol class="top-list">
        
      </ol>
    </div>

    <div class="top-col">
      <h3>ğŸ”¥Trendingï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      <ol class="top-list">
        
      </ol>
    </div>
  </section>

  

  <section class="top-col" style="margin:0 0 16px;">
    <h3>ğŸ­ Sourceéœ²å‡ºï¼ˆç«¶åˆæ¯”è¼ƒï¼‰</h3>
    <div class="small" style="margin-bottom:8px">åŒä¸€ä¼æ¥­åã§é›†è¨ˆï¼ˆå…¨æœŸé–“ / 48hï¼‰</div>
    
      <div class="meta">è©²å½“ã‚½ãƒ¼ã‚¹ãªã—</div>
    
  </section>

  <section class="top-col" style="margin:0 0 16px;">
    <h3>ğŸ§­ ã‚«ãƒ†ã‚´ãƒªåˆ¥ ä¸€æ¬¡æƒ…å ±æ¯”ç‡</h3>
    <div class="small" style="margin-bottom:8px">ä¸€æ¬¡æƒ…å ±ç‡ = primary / å…¨è¨˜äº‹ï¼ˆtechï¼‰ã€‚é–¾å€¤ 50% æœªæº€ã¯è­¦å‘Šè¡¨ç¤ºã€‚</div>
    
      <div class="meta">ã‚«ãƒ†ã‚´ãƒªé›†è¨ˆå¯¾è±¡ãªã—</div>
    
  </section>

    
  <section class="category-section" id="cat-system">
    <div class="category-header">
      <h2 style="margin:0">ã‚·ã‚¹ãƒ†ãƒ  <span class="tag">system</span></h2>
      <button class="btn" type="button" onclick="toggleCat('system')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-manufacturing">
    <div class="category-header">
      <h2 style="margin:0">è£½é€ ï¼ˆé‰„é‹¼ï¼‰ <span class="tag">manufacturing</span></h2>
      <button class="btn" type="button" onclick="toggleCat('manufacturing')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-blast_furnace">
    <div class="category-header">
      <h2 style="margin:0">é«˜ç‚‰ <span class="tag">blast_furnace</span></h2>
      <button class="btn" type="button" onclick="toggleCat('blast_furnace')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-eaf">
    <div class="category-header">
      <h2 style="margin:0">é›»ç‚‰ <span class="tag">eaf</span></h2>
      <button class="btn" type="button" onclick="toggleCat('eaf')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-rolling">
    <div class="category-header">
      <h2 style="margin:0">åœ§å»¶ <span class="tag">rolling</span></h2>
      <button class="btn" type="button" onclick="toggleCat('rolling')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-quality">
    <div class="category-header">
      <h2 style="margin:0">å“è³ª <span class="tag">quality</span></h2>
      <button class="btn" type="button" onclick="toggleCat('quality')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-maintenance">
    <div class="category-header">
      <h2 style="margin:0">ä¿å…¨ <span class="tag">maintenance</span></h2>
      <button class="btn" type="button" onclick="toggleCat('maintenance')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-market">
    <div class="category-header">
      <h2 style="margin:0">å¸‚æ³ï¼ˆã‚³ãƒ¢ãƒ‡ã‚£ãƒ†ã‚£ãƒ»æµ·é‹ãƒ»ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ï¼‰ <span class="tag">market</span></h2>
      <button class="btn" type="button" onclick="toggleCat('market')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-security">
    <div class="category-header">
      <h2 style="margin:0">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ <span class="tag">security</span></h2>
      <button class="btn" type="button" onclick="toggleCat('security')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-ai">
    <div class="category-header">
      <h2 style="margin:0">AI <span class="tag">ai</span></h2>
      <button class="btn" type="button" onclick="toggleCat('ai')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-dev">
    <div class="category-header">
      <h2 style="margin:0">é–‹ç™º <span class="tag">dev</span></h2>
      <button class="btn" type="button" onclick="toggleCat('dev')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-decarbonization_ops">
    <div class="category-header">
      <h2 style="margin:0">è„±ç‚­ç´ ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç®—å®šãƒ»LCAï¼‰ <span class="tag">decarbonization_ops</span></h2>
      <button class="btn" type="button" onclick="toggleCat('decarbonization_ops')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-policy">
    <div class="category-header">
      <h2 style="margin:0">æ”¿ç­–ãƒ»è¦åˆ¶ï¼ˆè„±ç‚­ç´ ï¼‰ <span class="tag">policy</span></h2>
      <button class="btn" type="button" onclick="toggleCat('policy')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-smart_factory">
    <div class="category-header">
      <h2 style="margin:0">ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ï¼ˆå°å…¥äº‹ä¾‹ï¼‰ <span class="tag">smart_factory</span></h2>
      <button class="btn" type="button" onclick="toggleCat('smart_factory')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
  <section class="category-section" id="cat-standards">
    <div class="category-header">
      <h2 style="margin:0">æ¨™æº–åŒ–ãƒ»è¦æ ¼ <span class="tag">standards</span></h2>
      <button class="btn" type="button" onclick="toggleCat('standards')">Toggle</button>
    </div>

    <div class="category-body">
      <!-- ã“ã“ã«æ—¢å­˜ã® topbox ã¨ topics list ã‚’ãã®ã¾ã¾ç½®ã -->


    <div class="topbox">
      <h3>â­æ³¨ç›®TOP5ï¼ˆ48hå¢—åˆ†ï¼‰</h3>
      
        <div class="small">è©²å½“ãªã—</div>
      
    </div>

    
      <div class="meta">è©²å½“ãªã—</div>
    
      </div>
  </section>
  
<script>
// Safariå¯¾ç­–ï¼šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¾©å…ƒã‚’æŠ‘æ­¢
if ('scrollRestoration' in history) history.scrollRestoration = 'manual';

function forceTopIfNoHash(){
  if (!location.hash) window.scrollTo(0, 0);
}

// bfcache/æˆ»ã‚‹å¯¾ç­–ï¼ˆSafariã§é‡è¦ï¼‰
window.addEventListener('pageshow', () => {
  forceTopIfNoHash();
});

// é€šå¸¸ãƒ­ãƒ¼ãƒ‰å¯¾ç­–
window.addEventListener('load', () => {
  setTimeout(forceTopIfNoHash, 0);
});
const selectedTags = new Set(); // è¤‡æ•°ã‚¿ã‚°
let tagMode = "AND";            // "AND" or "OR"
const btn = document.getElementById('closeFloating');

function setFloatingClose(open, closeFn){
  if(!open){ btn.hidden = true; btn.onclick = null; return; }
  btn.hidden = false;
  btn.onclick = closeFn;
}

function updateTagActiveView(){
  const box = document.getElementById('tag-active');
  if (!box) return;

  if (selectedTags.size === 0){
    box.style.display = 'none';
    box.textContent = '';
    return;
  }
  box.style.display = '';
  box.textContent = `tags: ${[...selectedTags].join(', ')} (${tagMode})`;
}

function toggleTag(tg){
  if (selectedTags.has(tg)) selectedTags.delete(tg);
  else selectedTags.add(tg);

  // ãƒœã‚¿ãƒ³è¦‹ãŸç›®ï¼ˆactive ã‚¯ãƒ©ã‚¹ï¼‰
  document.querySelectorAll(`[data-tag-btn="${tg}"]`).forEach(b=>{
    b.classList.toggle('active', selectedTags.has(tg));
  });

  updateTagActiveView();
  applyFilter();
}

function clearTagFilter(){
  selectedTags.clear();
  document.querySelectorAll('[data-tag-btn]').forEach(b=>b.classList.remove('active'));
  updateTagActiveView();
  applyFilter();
}

function applyFilter() {
  const q = (document.getElementById('q')?.value || '').toLowerCase();

  const rows = document.querySelectorAll('.category-body .topic-row, .top-zone .topic-row');
  let hit = 0;

  rows.forEach(el => {
    const title = (el.dataset.title || '').toLowerCase();
    const summary = (el.dataset.summary || '').toLowerCase();
    const imp = parseInt(el.dataset.imp || '0', 10);
    const recent = parseInt(el.dataset.recent || '0', 10);
    const tags = (el.dataset.tags || ''); // "EUè¦åˆ¶,CBAM" ãªã©

    const hitQ = !q || title.includes(q) || summary.includes(q);
    const itemTags = tags.split(',').map(s=>s.trim()).filter(Boolean);

    let hitTag = true;
    if (selectedTags.size > 0){
      const sel = [...selectedTags];
      hitTag = (tagMode === "AND")
        ? sel.every(t => itemTags.includes(t))
        : sel.some(t => itemTags.includes(t));
    }

    const show = hitQ && hitTag;
    el.style.display = show ? '' : 'none';
    if (show) hit++;
  });

  // â˜… ä»¶æ•°è¡¨ç¤º
  const box = document.getElementById('filter-count');
  if (!box) return;

  const isFiltering = q || selectedTags.size > 0;
  if (isFiltering) {
    box.textContent = `è©²å½“: ${hit}ä»¶ / å…¨${rows.length}ä»¶`;
    box.style.display = '';
  } else {
    box.style.display = 'none';
  }
  
    // â˜… 0ä»¶æ™‚ã®ãƒ’ãƒ³ãƒˆè¡¨ç¤º
  const hint = document.getElementById('filter-hint');
  if (!hint) return;

  if (isFiltering && hit === 0) {
    const tips = [];
    if (q) tips.push('æ¤œç´¢èªã‚’çŸ­ãã™ã‚‹ï¼åˆ¥è¡¨ç¾ã«ã™ã‚‹');
    tips.push('ãƒ•ã‚£ãƒ«ã‚¿ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã™ã‚‹');

    hint.innerHTML = `è©²å½“ãªã—ã€‚<strong>æ¡ä»¶ã‚’ç·©ã‚ã¦ãã ã•ã„ï¼š</strong> ${tips.join('ãƒ»')}`;
    hint.style.display = '';
  } else {
    hint.style.display = 'none';
  }
}


document.getElementById('q')?.addEventListener('input', applyFilter);
document.getElementById('tagModeOr')?.addEventListener('change', (e) => {
  tagMode = e.target.checked ? "OR" : "AND";
  updateTagActiveView();
  applyFilter();
});

function toggleCat(id) {
  const sec = document.getElementById('cat-' + id);
  if (sec) sec.classList.toggle('collapsed');
}
let catsCollapsed = false;
function toggleAllCats() {
  catsCollapsed = !catsCollapsed;
  document.querySelectorAll('.category-section').forEach(sec => {
    sec.classList.toggle('collapsed', catsCollapsed);
  });
}

function openSectionFor(el){
  const sec = el.closest('.category-section');
  if (sec) sec.classList.remove('collapsed');
}

function ensureVisible(el){
  // ãƒ•ã‚£ãƒ«ã‚¿ç­‰ã§éè¡¨ç¤ºãªã‚‰ä¸€æ—¦è¡¨ç¤ºã«æˆ»ã™ï¼ˆæœ€ä½é™ï¼‰
  if (el.style.display === 'none') el.style.display = '';
}

function scrollToTopic(hash){
  if (!hash || !hash.startsWith('#topic-')) return false;
  const el = document.querySelector(hash);
  if (!el) return false;

  // ã‚«ãƒ†ã‚´ãƒªã‚’é–‹ã
  openSectionFor(el);
  ensureVisible(el);

  // details ã‚’è‡ªå‹•ã§é–‹ãï¼ˆã‚ã‚Œã°ï¼‰
  const det = el.querySelector('details.insight');
  if (det && !det.open) det.open = true;

  requestAnimationFrame(() => {
    el.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
  return true;
}


document.addEventListener('click', (e) => {
  const a = e.target.closest('a[href^="#topic-"]');
  if (!a) return;

  const hash = a.getAttribute('href');
  if (scrollToTopic(hash)) {
    e.preventDefault();
    history.replaceState(null, '', hash);
  }
});

window.addEventListener('load', () => {
  if (location.hash) scrollToTopic(location.hash);
});

// Tag bar: More toggleï¼ˆã‚¹ãƒãƒ›åœ§è¿«å¯¾ç­–ï¼‰
document.getElementById('tagMore')?.addEventListener('click', () => {
  const bar = document.getElementById('tagBar');
  if (!bar) return;
  bar.classList.toggle('collapsed');

  // ãƒœã‚¿ãƒ³æ–‡è¨€åˆ‡æ›¿ï¼ˆä»»æ„ï¼‰
  const more = document.getElementById('tagMore');
  if (more) more.textContent = bar.classList.contains('collapsed') ? 'ï¼‹ more' : 'âˆ’ less';
});

function parseDateValue(v){
  if (!v) return 0;
  // ä¾‹: "2025-12-21T10:00:00+00:00" / "2025-12-21 10:00:00" ãªã©ã‚’è¨±å®¹
  const t = Date.parse(String(v).replace(' ', 'T'));
  return isNaN(t) ? 0 : t;
}

function applySort(){
  const key = (document.getElementById('sortKey')?.value || 'date');
  const dir = (document.getElementById('sortDir')?.value || 'desc');
  const sign = (dir === 'asc') ? 1 : -1;

  // å¯¾è±¡: Top list + å„ã‚«ãƒ†ã‚´ãƒªã®ç›´ä¸‹ ul + topbox(tech) ã® ul
  const lists = [
    ...document.querySelectorAll('ol.top-list'),
    ...document.querySelectorAll('.category-body > ul'),
    ...document.querySelectorAll('.topbox > ul')
  ];

  for (const list of lists){
    const items = [...list.querySelectorAll(':scope > li.topic-row')];
    if (items.length <= 1) continue;

    items.sort((a,b) => {
      if (key === 'importance'){
        const av = parseInt(a.dataset.imp || '0', 10) || 0;
        const bv = parseInt(b.dataset.imp || '0', 10) || 0;
        if (av !== bv) return (av - bv) * sign;
      } else {
        const av = parseDateValue(a.dataset.date);
        const bv = parseDateValue(b.dataset.date);
        if (av !== bv) return (av - bv) * sign;
      }
      // åŒç‚¹ã®ã¨ãã¯å®‰å®šåŒ–ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰
      const at = (a.dataset.title || '');
      const bt = (b.dataset.title || '');
      return at.localeCompare(bt);
    });

    for (const li of items) list.appendChild(li);
  }

  // ä¿å­˜ï¼ˆä»»æ„ï¼šæ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã‚‚åŒã˜ï¼‰
  try{
    localStorage.setItem('sortKey', key);
    localStorage.setItem('sortDir', dir);
  }catch(e){}
}

// åˆæœŸåæ˜ ï¼ˆä»»æ„ï¼‰
(function initSortUI(){
  try{
    const k = localStorage.getItem('sortKey');
    const d = localStorage.getItem('sortDir');
    if (k && document.getElementById('sortKey')) document.getElementById('sortKey').value = k;
    if (d && document.getElementById('sortDir')) document.getElementById('sortDir').value = d;
  }catch(e){}
  applySort();
})();
window.addEventListener('load', () => {
  // å…ˆã«ãƒˆãƒƒãƒ—å›ºå®šâ†’ãã®å¾Œã«æŠ˜ã‚ŠãŸãŸã¿ï¼ˆã‚ºãƒ¬ã‚’æ¸›ã‚‰ã™ï¼‰
  setTimeout(() => {
    if (!location.hash) window.scrollTo(0, 0);
    toggleAllCats();
  }, 0);
});

</script>

</body>
</html>